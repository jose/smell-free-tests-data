**1 - Abnormal UTF-Use (AUU):**


*Description:* Test suites change the default behavior of the unit-testing framework.

*Impact:* Harder to understand and maintain.



**2 - Anonymous Test (AT):**

*Description:* Test cases with non-descriptive names.

*Impact:* Harder to understand and maintain.

*Alternative Designations:* Test-Method Category Name.

**3 - Assertion Roulette (AR):**

*Description:* A test case has several unexplained assertions. This test smell can arise for one of two reasons:

 1. A test case has an excessive number of assertions (typically because the test case is inspecting too much functionality);
  
 2. A test case has multiple assertions without assertion messages.
  
*Impact:* When the test fails, it is difficult to identify the exact assertion that failed (hinders comprehensibility and maintainability).


\begin{lstlisting}[language=Java,caption=Example of a test case with the ``Assertion Roulette'' test smell~\protect\cite{palomba2016diffusion}.,label=exampleAssertionRoulette]
@Test
public void test8() throws Throwable {
  Document document0 = new Document("", "");
  assertNotNull(document0);
  
  document0.procText.add((Character) 's');
  String string0 = document0.stringify();
  assertEquals("s", document0.stringify());
  assertNotNull(string0);
  assertEquals("s", string0);
}
\end{lstlisting}

4 - Brittle Assertion (BA):

\noindent\textit{Description:} One or more assertions in a test case check values that said test case does not manipulate (the test is checking too much).

\noindent\textit{Impact:} Less effective (the test may fail when it should not) and harder to maintain.

5 - Conditional Test Logic (CTL):

\noindent\textit{Description:} Test cases have control structures that may prevent the execution of specific statements (i.e., the test cases have many execution paths).

\noindent\textit{Impact:} Behave unpredictably and are less effective (this smell may hamper test coverage and fault detection effectiveness). Such tests are also harder to understand and maintain.

\noindent\textit{Alternative Designations:} Indented Test~\cite{breugelmans2008testq, meszaros2007xunit} and Guarded Test~\cite{reichhart2007rule}.

\noindent\textit{Variants:} Control Logic (ConL)~\cite{aljedaani2021test, reichhart2007rule} --- test cases use methods such as debug or halt to control the execution flow.

6 - Constructor Initialization (CI):

\noindent\textit{Description:} A test suite uses a constructor to initialize the fields; instead, tests should have set up methods (using constructors is a bad practice and, as such, should be avoided).

\noindent\textit{Impact:} Harder to understand.

7 - Dead Field (DF):

\noindent\textit{Description:} Fields are initialized in an implicit setup but not used by the test cases.

\noindent\textit{Impact:} This smell affects understandability and leads to slower tests (unnecessary work).

\noindent\textit{Alternative Designations:} Unused Shared-Fixture Variables~\cite{reichhart2007rule}.

8 - Default Test (DT):

\noindent\textit{Description:} Using the example test suites automatically generated by Android Studio.

\noindent\textit{Impact:} If not removed, developers may add test cases to such test suites.

9 - Duplicate Assert (DA):
\else
\subsubsection*{9 -- Duplicate Assert (DA)~\cite{aljedaani2021test, peruma2019distribution, tsDetectWebsite, virginio2019influence}:}\label{smell:da}
\fi

\noindent\textit{Description:} A test case contains several assertions that check the same condition (i.e., a test case contains two or more assertions with the same parameters). This smell arises even if the test case checks the same condition with different values.

\noindent\textit{Impact:} Harder to understand and maintain.

\begin{lstlisting}[language=Java,caption=Example of a test case with the ``Duplicate Assert'' test smell~\protect\cite{peruma2019distribution}.,label=exampleDuplicateAssert]
@Test
public void testXmlSanitizer() {
  .....
  valid = XmlSanitizer.isValid("Fritz-box");
  assertEquals("Minus is valid", true, valid);
  System.out.println("Minus test - passed");
  valid = XmlSanitizer.isValid ("Fritz-box");
  assertEquals("Minus is valid", true, valid);
  System.out.println("Minus test - passed");
  .....
}
\end{lstlisting}

10 - Eager Test (ET):

\noindent\textit{Description:} A test case checks multiple methods of the class under test (i.e., it verifies too much functionality). Typically, this smell is said to occur when a test case checks two or more methods of the class under test.

\noindent\textit{Impact:} Harder to understand and maintain.

\begin{lstlisting}[language=Java,caption=Example of a test case with the ``Eager Test'' test smell~\protect\cite{Panichella2020}.,label=exampleEagerTest]
@Test
public void test56() throws Throwable {
  SubstringLabeler substringLabeler0 = new SubstringLabeler();
  substringLabeler0.connectionNotification("testSet", "testSet");
  InstanceEvent instanceEvent0 = substringLabeler0.m_ie;
  substringLabeler0.acceptInstance(instanceEvent0);
  assertEquals("SubstringLabeler", substringLabeler0.getCustomName());
  assertFalse(substringLabeler0.isBusy());
  assertEquals("Match", substringLabeler0.getMatchAttributeName());
}
\end{lstlisting}

11 - Empty Shared-Fixture (ESF):

\noindent\textit{Description:} A test suite contains an implicit setup with an empty body.

\noindent\textit{Impact:} Harder to understand and maintain.

12 - Empty Test (EmT):

\noindent\textit{Description:} Test cases without executable statements.

\noindent\textit{Impact:} Less effective (empty tests always pass, thus giving a false sense of security).

\noindent\textit{Variants:} Comments Only Test (COT)~\cite{reichhart2007rule} --- corresponds to a commented-out test case.

13 - Erratic Test (ErT):

\noindent\textit{Description:} Tests exhibit erratic behavior --- they might give different results in different runs (e.g., different people run the same tests but obtain different results).

\noindent\textit{Impact:} Less effective.

14 - Exception Handling (EH):

\noindent\textit{Description:} Tests use throw/catch statements instead of JUnit's exception handling.

\noindent\textit{Impact:} Harder to understand and maintain.  This smell also makes tests less effective.

15 - For Testers Only (FTO):

\noindent\textit{Description:} The production class contains code exclusively used by tests.

\noindent\textit{Impact:} This test smell negatively impacts the understandability and maintainability of production code since it makes the system under test more complex.

16 - Fragile Test (FT):

\noindent\textit{Description:} Tests start to fail to compile/run due to unrelated changes to the system under test. Fragile tests can also start to fail in situations where nothing was changed.

\noindent\textit{Impact:} This smell leads to increased maintenance costs.

17 - Frequent Debugging (FD):

\noindent\textit{Description:} It is often necessary to manually debug the tests to determine the cause of failures. This test smell might arise due to (1) the lack of available information or (2) infrequently run tests.

\noindent\textit{Impact:} Such tests are less effective and harder to understand and maintain.

\noindent\textit{Alternative Designations:} Manual Debugging~\cite{meszaros2007xunit}.

18 - General Fixture (GF):

\noindent\textit{Description:} An implicit setup is excessively general/large, so the test cases do not access the entirety of the fixture.

\noindent\textit{Impact:} This smell affects comprehensibility and causes tests to run slower due to the unnecessary extra work. It can also make the tests fragile (i.e., affects maintainability).

19 - Hard-to-Test Code (HTTC):

\noindent\textit{Description:} The system under test has properties that make it inherently difficult to test (e.g., highly coupled code). It is also possible to have test code that is difficult to test.

\noindent\textit{Impact:} Less effective automatically generated tests. Harder to manually write tests.

\ifdefined\modoTese
20 - Ignored Test (IgT):

\noindent\textit{Description:} Test case/suite uses the \emph{@Ignore} annotation, thus impeding it from running.

\noindent\textit{Impact:} Test suites become harder to understand. Causes compilation time overhead.

21 - Indirect Testing (IT):

\noindent\textit{Description:} A test case performs tests on classes other than the one under test. This smell may arise because the test case is (indirectly) checking the respective production class using methods of other classes.

\noindent\textit{Impact:} This smell negatively affects the comprehensibility and maintainability of test cases. It can also hamper the debugging process.

\begin{lstlisting}[language=Java,caption=Example of a test case with the ``Indirect Testing'' test smell~\protect\cite{palomba2016diffusion}.,label=exampleIndirectTesting]
@Test
public void test3() throws Throwable {
  SweetHome3D sweetHome3D0 = new SweetHome3D();
  HomeRecorder.Type homeRecorder_Type0 = HomeRecorder.Type.DEFAULT;
  HomeFileRecorder homeFileRecorder0 = (HomeFileRecorder) sweetHome3D0.getHomeRecorder(homeRecorder_Type0);
  assertNotNull(homeFileRecorder0);
}
\end{lstlisting}

22 - Lack of Cohesion of Methods (LCM):

\noindent\textit{Description:} Unrelated test cases are arranged into a test suite (i.e., they are not cohesive).

\noindent\textit{Impact:} Harder to understand and maintain.

\begin{lstlisting}[language=Java,caption=Example of a test suite with the ``Lack of Cohesion of Methods'' test smell.,label=exampleLackOfCohesionOfMethods]  
@Test
public void test00() throws Throwable {
  Login login0 = new Login();
  int int0 = login0.getAuth_num();
  assertEquals(0, login0.getAuth_max());
  assertEquals(0, int0);
}

@Test
public void test01() throws Throwable {
  int int0 = UserManagement.getNBGM();
  assertEquals(0, int0);
}
\end{lstlisting}

23 - Lazy Test (LT):

\noindent\textit{Description:} Multiple test cases in a test suite check the same production method.

\noindent\textit{Impact:} This smell can hinder maintainability.

\begin{lstlisting}[language=Java,caption=Example of a test suite with the ``Lazy Test'' test smell~\protect\cite{tsDetectWebsite}.,label=exampleLazyTest]
@Test
public void testDecrypt() throws Exception {
  FileInputStream file = new FileInputStream(ENCRYPTED_DATA_FILE_4_14);
  byte[] enfileData = new byte[file.available()];
  FileInputStream input = new FileInputStream(DECRYPTED_DATA_FILE_4_14);
  byte[] fileData = new byte[input.available()];
  input.read(fileData);
  input.close();
  file.read(enfileData);
  file.close();
  String expectedResult = new String(fileData, "UTF-8");
  assertEquals("Testing simple decrypt",expectedResult, Cryptographer.decrypt(enfileData, "test"));
}

@Test
public void testEncrypt() throws Exception {
  String xml = readFileAsString(DECRYPTED_DATA_FILE_4_14);
  byte[] encrypted = Cryptographer.encrypt(xml, "test");
  String decrypt = Cryptographer.decrypt(encrypted, "test");
  assertEquals(xml, decrypt);
}
\end{lstlisting}

24 - Likely Ineffective Object-Comparison (LIOC):

\noindent\textit{Description:} A test case has one or more object comparisons that will never fail (e.g., a test case compares an object with itself).

\noindent\textit{Impact:} Less effective.


\begin{lstlisting}[language=Java,caption=Example of a test case with the ``Likely Ineffective Object-Comparison'' test smell~\protect\cite{Panichella2020}.,label=exampleLikelyIneffectiveObjectComparison]
@Test
public void test58() throws Throwable {
  OrganizationImpl organizationImpl0 = new OrganizationImpl();
  boolean boolean0 = organizationImpl0.equals(organizationImpl0);
  assertTrue(boolean0);
  assertEquals(0L, organizationImpl0.getPrimaryKey());
}
\end{lstlisting}

25 - Magic Number Test (MNT):

\noindent\textit{Description:} A test case uses unexplained/undocumented numerical values.

\noindent\textit{Impact:} This test smell hampers the understandability and maintainability of test cases (it is harder to understand the meaning and purpose of such values).

26 - Manual Intervention (MI):

\noindent\textit{Description:} Tests that require some form of manual action to run.

\noindent\textit{Impact:} Such tests are likely to be run less frequently due to the effort they require. As such, this smell makes tests less effective.

27 - Mixed Selectors (MS):

\noindent\textit{Description:} A class contains both production methods and test cases.

\noindent\textit{Impact:} This test smell negatively impacts understandability and maintainability.

%\noindent\textit{Detection Strategy:} A class contains both test and production code~\cite{reichhart2007rule}.

28 - Mystery Guest (MG):

\noindent\textit{Description:} Tests use external resources (such as files or databases); hence, they are not self-contained.

\noindent\textit{Impact:} Harder to understand and maintain due to the lack of available information. The usage of external resources also introduces hidden dependencies.

29 - Non-Java Smells (NJS):

\noindent\textit{Description:} This does not correspond to a specific smell. Instead, it represents a set of simple test smells associated with concepts unrelated to Java. We have decided to combine the following smells into this category:

\begin{itemize}

  \item \textbf{Empty Method Category~\cite{reichhart2007rule}:} Test case with an empty method category.
  
  \item \textbf{Empty Test-Method Category~\cite{reichhart2007rule}:} Test case with an empty test method category.
  
  \item \textbf{TTCN-3 Smells~\cite{baker2006trex}:} Set of test smells specific to TTCN-3 test suites.
  
  \item \textbf{Unclassified Method Category~\cite{reichhart2007rule}:} Test cases not organized by a method-category.
  
\end{itemize}

30 - Obscure In-line Setup (OISS):

\noindent\textit{Description:} A test case contains an excessive amount of setup functionality (an in-line setup should only have what is required to understand the test).

\noindent\textit{Impact:} Harder to understand and maintain.

\noindent\textit{Variants:} Max Instance Variables (MIV)~\cite{reichhart2007rule} --- Overly large fixture.

\noindent\textit{Note:} The acceptable amount of setup information in a test case is dependent on the characteristics of the respective test and the production class.

31 - Overcommented Test (OCT):

\noindent\textit{Description:} A test contains too many comments.

\noindent\textit{Impact:} This smell can make the tests harder to understand (which is the opposite of what comments should do).

32 - Overreferencing (OF):

\noindent\textit{Description:} A test case that references classes an excessive number of times.

\noindent\textit{Impact:} This test smell makes the tests more difficult to understand and maintain.

\noindent\textit{Note:} The acceptable amount of referenced classes in a test case is dependent on the characteristics of the respective test and the production class.

33 - Proper Organization (PO):

\noindent\textit{Description:} Poorly organized test cases that do not respect testing conventions.

\noindent\textit{Impact:} Harder to understand and maintain.

34 - Redundant Assertion (RA):

\noindent\textit{Description:} Test cases have assertions that are permanently true/false (e.g., assertions with equal values for the actual and expected parameters).

\noindent\textit{Impact:} This smell makes the tests less effective (it can give a false sense of security).

%\noindent\textit{Detection:} A test case has at least one assertion with the same values for the actual and expected parameters~\cite{tsDetectWebsite}.

\begin{lstlisting}[language=Java,caption=Example of a test case with the ``Redundant Assertion'' test smell~\protect\cite{peruma2019distribution}.,label=exampleRedundantAssertion]
@Test
public void testTrue() {
  /* ** Assert statement will always return true ** */
  assertEquals(true, true) ;
}
\end{lstlisting}

35 - Redundant Print (RP):

\noindent\textit{Description:} Test cases have (unnecessary) print statements.

\noindent\textit{Impact:} May hinder test effectiveness (print statements consume both time and resources).

\noindent\textit{Variants:} Transcripting Test (TT)~\cite{reichhart2007rule} --- corresponds to printing/logging to the console.

36 - Resource Optimism (RO):

\noindent\textit{Description:} Test cases that make optimistic assumptions about the existence/state of external resources.

\noindent\textit{Impact:} This smell can lead to non-deterministic test results.

37 - Returning Assertion (ReA):

\noindent\textit{Description:} A test case contains assertions and also returns a value.

\noindent\textit{Impact:} This smell affects maintainability and comprehensibility.

38 - Rotten Green Tests (RGT):

\noindent\textit{Description:} Test cases affected by this smell can pass without executing at least one assertion, thus giving a false sense of security.

\noindent\textit{Impact:} Less effective.

\noindent\textit{Variants:} Early Returning Test (ERT) --- the test case does not execute certain assertions because it returns a value too early.

\begin{lstlisting}[language=Java,caption=Example of a test case with the ``Rotten Green Tests'' test smell~\protect\cite{aranega2021rotten}.,label=exampleRottenGreenTests]
@Test
public void testLoggerContainsLogEntry(){
  Logger logger = new Logger();
  logger.log("log1");
  logger.log("log2");
  for (LogEntry logEntry : logger.getLogEntries()){
    assertTrue(logger.containsLogEntry(logEntry));
  }
}
\end{lstlisting}

39 - Sensitive Equality (SE):

\noindent\textit{Description:} A test has assertions that perform equality checks using the \emph{toString} method.

\noindent\textit{Impact:} Test cases become dependent on (irrelevant) details of the String used in the comparison. Moreover, if the \emph{toString} method for an object changes, the test starts failing.

\begin{lstlisting}[language=Java,caption=Example of a test case with the ``Sensitive Equality'' test smell~\protect\cite{Panichella2020}.,label=exampleSensitiveEquality]
@Test
public void test62() throws Throwable {
  SubstringLabeler.Match substringLabeler_Match0 = new SubstringLabeler.Match();
  String string0 = substringLabeler_Match0.toString();
  assertEquals("Substring: [Atts: ]", string0);
}
\end{lstlisting}

40 - Sleepy Test (ST):

\noindent\textit{Description:} Temporarily stopping the execution of a test case.

\noindent\textit{Impact:} Less effective --- pausing a thread can trigger unexpected results.

41 - Slow Tests (SloT):

\noindent\textit{Description:} Tests take a long time to run. This smell can arise as a result of (1) poorly designed test code or (2) the characteristics of the system under test.

\noindent\textit{Impact:} Slow tests are less effective and are likely to be run less frequently.

42 - Teardown Only Test (TOT):

\noindent\textit{Description:} Test suites that only specify teardown.

\noindent\textit{Impact:} This smell affects maintainability.

43 - Test Code Duplication (TCD):

\noindent\textit{Description:} Unwanted duplication in the test code. Test code duplication can be present amongst several tests or within the same test.

\noindent\textit{Impact:} This smell affects maintainability and comprehensibility.

\noindent\textit{Alternative Designations:} Duplicated Code~\cite{breugelmans2008testq}.

44 - Test Logic in Production (TLP):

\noindent\textit{Description:} Production code contains logic that should solely be exercised when testing.

\noindent\textit{Impact:} This smell makes the system under test more complex and fault-prone (serious problems can arise when running the test-specific code in a production environment).

45 - Test Maverick (TM):

\noindent\textit{Description:} A test suite contains test cases independent of the existing implicit setup.

\noindent\textit{Impact:} Run slower (unnecessary extra work). Harder to comprehend and maintain.

46 - Test Pollution (TP):

\noindent\textit{Description:} Dependent tests that can use (i.e., read/write) shared resources.

\noindent\textit{Impact:} This test smell negatively impacts understandability and maintainability.


47 - Test Redundancy (TR):

\noindent\textit{Description:} One or more test cases can be removed without affecting the fault detection effectiveness of the test suite.

\noindent\textit{Impact:} Redundant test cases only make the test suite harder to understand and maintain.

\begin{lstlisting}[language=Java,caption=Example of a test suite with the ``Test Redundancy'' test smell.,label=exampleTestRedundancy]  
@Test
public void test00()  throws Throwable  {
  int int0 = Login.getPASSWORDENC();
  assertEquals(2, int0);
}
  
@Test
public void test01()  throws Throwable  {
  int int0 = Login.getPASSWORDENC();
  assertEquals(2, int0);
}
\end{lstlisting}

48 - Test Run War (TRW):

\noindent\textit{Description:} Tests allocate resources (e.g., temporary files) used by various people.

\noindent\textit{Impact:} These tests may fail if different people run them simultaneously.

49 - Test-Class Name (TCN):

\noindent\textit{Description:} Test suites with non-descriptive names.

\noindent\textit{Impact:} Harder to understand and maintain.

50 - Unknown Test (UT):

\noindent\textit{Description:} Test cases without valid assertions or \emph{@Test(expected)} annotations.

\noindent\textit{Impact:} Less effective because there are no assertions to check whether the results are as expected. Harder to understand and maintain as there are no assertions to examine, thereby making it harder to deduce the purpose of the test cases (this is especially apparent when test cases have non-descriptive names).

\noindent\textit{Alternative Designations:} Assertionless~\cite{breugelmans2008testq} and Assertionless Test~\cite{reichhart2007rule}.

\noindent\textit{Variants:} Under-the-carpet Assertion (UCA)~\cite{reichhart2007rule} --- corresponds to commenting-out assertions in a test case (if only failing assertions are commented-out from the test case, then it is considered an Under-the-carpet failing Assertion (UCFA)~\cite{reichhart2007rule} smell).


\begin{lstlisting}[language=Java,caption=Example of a test case with the ``Unknown Test`` test smell~\protect\cite{peruma2019distribution}.,label=exampleUnknownTest]
@Test
public void hitGetPOICategoriesApi() throws Exception {
  POICategories poiCategories = apiClient.getPOICategories(16);
  for (POICategory category : poiCategories) {
    System.out.println(category.name() + ": " + category);
  }
}

\end{lstlisting}

51 - Unused Inputs (UI):

\noindent\textit{Description:} A test case has no assertions to check the particular values that said test case manipulates (the test case is checking too little).

\noindent\textit{Impact:} Less effective (as it may be unable to reveal faults) and harder to maintain.

\begin{lstlisting}[language=Java,caption=Example of a test case with the ``Unused Inputs'' test smell~\protect\cite{huo2014improving}.,label=exampleUnusedInputs]
@Test
public void testGetRowKey() {
  DefaultKeyedValues2D d = new DefaultKeyedValues2D();
  
  d.addValue(new Double(1.0), "R1", "C1");
  d.addValue(new Double(1.0), "R2", "C1");
  assertEquals("R1", d.getRowKey(0));
  assertEquals("R2", d.getRowKey(1));
}
\end{lstlisting}

52 - Unusual Test Order (UTO):

\noindent\textit{Description:} A test that directly calls other tests.

\noindent\textit{Impact:} Such tests may manifest erratic behavior (i.e., they are less effective).

53 - Vague Header Setup (VHS):

\noindent\textit{Description:} Fields are initialized in the class header rather than in an implicit setup.

\noindent\textit{Impact:} Harder to understand and maintain.

54 - Verbose Test (VT):

\noindent\textit{Description:} A test case contains an excessive number of statements (i.e., the test is unnecessarily long). As a result, the test code is neither clean nor simple.

\noindent\textit{Impact:} The excessive number of statements makes the tests harder to understand and maintain. Such tests are also more likely to contain other types of test smells~\cite{grano2019scented}.

\noindent\textit{Alternative Designations:} Complex Test~\cite{meszaros2007xunit}, Long Test~\cite{reichhart2007rule} and Obscure Test~\cite{meszaros2007xunit}.

\noindent\textit{Note:} The acceptable number of statements in a test case is dependent on the situation at hand (e.g., 20 statements may be too much in some situations and not enough in others).

[1]

[2]
